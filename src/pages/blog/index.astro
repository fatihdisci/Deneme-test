---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import BlogSearch from '../../components/BlogSearch';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

// Serialize posts for React component (Date objects need conversion)
const serializedPosts = posts.map(post => ({
  slug: post.slug,
  data: {
    ...post.data,
    pubDate: post.data.pubDate.toISOString(),
  }
}));
---

<Layout title="Blog" description="Hukuki gelişmeler, güncel Yargıtay kararları ve mevzuat değişiklikleri üzerine incelemelerimiz.">
  <!-- Header -->
  <section class="py-20 bg-slate-900 border-b border-white/5">
    <div class="container mx-auto px-4 text-center">
      <h1 class="text-4xl md:text-5xl font-bold text-white mb-4 font-serif" data-aos="fade-up">Blog</h1>
      <p class="text-slate-400 max-w-2xl mx-auto" data-aos="fade-up" data-aos-delay="100">
        Hukuki gelişmeler, güncel Yargıtay kararları ve mevzuat değişiklikleri üzerine incelemelerimiz.
      </p>
    </div>
  </section>

  <!-- Blog Grid with Search -->
  <section class="py-24 bg-slate-950">
    <div class="container mx-auto px-4">
      <BlogSearch client:load posts={serializedPosts} />
    </div>
  </section>
</Layout>
